{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{% block title %}{% endblock %} | VP</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="{% static 'app/bootstrap/dist/css/bootstrap.min.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'app/font-awesome/css/font-awesome.min.css' %}">
    <!-- Ionicons -->
    <link rel="stylesheet" href="{% static 'app/Ionicons/css/ionicons.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'app/dist/css/AdminLTE.min.css' %}">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="{% static 'app/dist/css/skins/_all-skins.min.css' %}">
    {#    <!-- Morris analytics -->#}
    {#    <link rel="stylesheet" href="{% static 'app/morris.js/morris.css' %}">#}
    <!-- jvectormap -->
    <link rel="stylesheet" href="{% static 'app/jvectormap/jquery-jvectormap.css' %}">
    <!-- Date Picker -->
    <link rel="stylesheet" href="{% static 'app/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css' %}">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="{% static 'app/bootstrap-daterangepicker/daterangepicker.css' %}">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="{% static 'app/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css' %}">
    <!-- iCheck -->
    {#    <link rel="stylesheet" href="{% static 'app/iCheck/square/blue.css' %}">#}
    <!-- DataTables -->
    <link rel="stylesheet" href="{% static 'app/datatables.net-bs/css/dataTables.bootstrap.min.css' %}">
    <!-- Nepali Date Picker -->
    <link rel="stylesheet" href="{% static 'app/NepaliDatePicker/src/ne paliDatePicker.css' %}">
    <!-- Custom Css -->
    <link rel="stylesheet" href="{% static 'app/select2/dist/css/select2.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/custom.css' %}">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <![if lt IE 9]-->
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
{#    analytics.js#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css"></script>
    <!-- jQuery 3 -->
    <script src="{% static 'app/jquery/dist/jquery.min.js' %}"></script>
    <!-- Google Font -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    {% block styles %}

    {% endblock %}
</head>
<body class="hold-transition skin-blue sidebar-mini sidebar-collapse">
<div id="loading" style="display: none;">
    <img src="{% static 'app/image/loading.gif' %}">
</div>
<div class="wrapper">

    {% include 'app/backend/layouts/header.html' %}

    {% block content %}{% endblock %}

    {% include 'app/backend/layouts/sidebar.html' %}

    {% include 'app/backend/layouts/footer.html' %}

    {% include 'app/backend/layouts/setting.html' %}

</div>
<!-- ./wrapper -->

<!-- jQuery UI 1.11.4 -->
<script src="{% static 'app/jquery-ui/jquery-ui.min.js' %}"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="{% static 'app/bootstrap/dist/js/bootstrap.min.js' %}"></script>
<!-- Sparkline -->
<script src="{% static 'app/jquery-sparkline/dist/jquery.sparkline.min.js' %}"></script>
{#<!-- jvectormap -->#}
{#<script src="{% static 'app/jvectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>#}
{#<script src="{% static 'app/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>#}
<!-- jQuery Knob Chart -->
<script src="{% static 'app/jquery-knob/dist/jquery.knob.min.js' %}"></script>
<!-- daterangepicker -->
<script src="{% static 'app/moment/min/moment.min.js' %}"></script>
<script src="{% static 'app/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
<!-- datepicker -->
<script src="{% static 'app/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' %}"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="{% static 'app/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js' %}"></script>
<!-- Slimscroll -->
<script src="{% static 'app/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
<script src="{% static 'app/jquery-validation/dist/jquery.validate.js' %}"></script>
<!-- FastClick -->
<script src="{% static 'app/fastclick/lib/fastclick.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'app/dist/js/adminlte.min.js' %}"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="{% static 'app/dist/js/pages/dashboard.js' %}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% static 'app/dist/js/demo.js' %}"></script>
<script src="{% static 'app/select2/dist/js/select2.full.js' %}"></script>
<!-- iCheck -->
{#<script src="{% static 'app/iCheck/icheck.min.js' %}"></script>#}
<!-- DataTables -->
<script src="{% static 'app/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'app/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<!-- Highchart js -->
<script src="{% static 'app/highchartJsmain/highcharts.js' %}"></script>
<script src="{% static 'app/highchartJsmain/accessibility.js' %}"></script>
<script src="{% static 'app/highchartJsmain/export-data.js' %}"></script>
<script src="{% static 'app/highchartJsmain/exporting.js' %}"></script>
<script src="{% static 'app/highchartJsmain/main.js' %}"></script>

<!-- Morris.js charts -->
{#<script src="{% static 'app/raphael/raphael.min.js' %}"></script>#}
{#<script src="{% static 'app/morris.js/morris.min.js' %}"></script>#}
<!-- Nepali Date Picker -->
<script src="{% static 'app/NepaliDatePicker/src/jquery.nepaliDatePicker.js' %}"></script>
<script>
    $(function () {
        $('.select2').select2({}).on("select2-open", function () {
            $(this).select2('positionDropdown', true);
        });
        $('.datatable').dataTable({
            "iDisplayLength": 50
        });

        $(document).on('click', '#closeMessage', function (e) {
            e.preventDefault();
            $(this).parents('.messages').hide('slow')
        });

        $(document).on('click', '.delete-data', function (e) {
            e.preventDefault();
            let _url = $(this).prop('href');

            swal({
                title: "Are you sure?",
                text: "You are about to change process of this order. ",
                icon: "info",
                buttons: true,
                dangerMode: true,
            })
                .then((willChange) => {
                    if (willChange) {
                        window.location = _url;
                    }
                });
        });

        let $loading = $('#loading');
        $(document)
            .ajaxStart(function () {
                $loading.show();
            })
            .ajaxStop(function () {
                $loading.hide();
            });

        if ($(document).find('.messages').length > 0) {
            setTimeout(function () {
                $('.messages').hide('slow')
            }, 2000)
        }

        {#    Calculator  #}
        $('#calculator button').click(function () {
            let $calculator = $('#calculator');
            let new_result = '';
            let result = $calculator.find('input#result').val();
            let val1 = $calculator.find('input#input1').val();
            if (result) {
                $calculator.find('input#input1').val(parseFloat(result));
                $calculator.find('input#result').val('');
                $calculator.find('input#input2').val(val1);
            }

            val1 = $calculator.find('input#input1').val();
            let val2 = $calculator.find('input#input2').val();
            if (val1) {
                let op = $(this).data('op');
                val2 = val2 ? val2 : 0;
                switch (op) {
                    case 'add':
                        new_result = parseFloat(val1) + parseFloat(val2);
                        break;
                    case 'sub':
                        new_result = parseFloat(val1) - parseFloat(val2);
                        break;
                    case 'mul':
                        new_result = parseFloat(val1) * parseFloat(val2);
                        break;
                    case 'div':
                        new_result = parseFloat(val1) / parseFloat(val2);
                        break;
                    case 'per':

                        new_result = (parseFloat(val1) * parseFloat(val2) / 100).toFixed(2);
                        break;
                    case 'reset':
                        new_result = '';
                        $calculator.find('input#result').val('');
                        $calculator.find('input#input1').val('');
                        $calculator.find('input#input2').val('');
                        break;
                }
                $calculator.find('input#result').val(new_result);
            }
        });
    });
</script>

{#  Functions  #}
<script>
    let makeFullPage = function () {
         $('.sidebar-toggle').trigger('click')
    }
</script>


{# Format Currency #}
<script>
    {#    Global Date Converter #}
    $(document).ready(function () {

        {#  Nepali number date to strng  #}

        $('.bs-n-t').each(function () {
            let num_date = $.trim($(this).text());
            num_date = num_date.split("-");
            if (num_date.length < 2) {
                num_date[2] = 1
            }
            if (num_date.length < 1) {
                num_date[1] = 1
            }
            let formattedNepaliDate = calendarFunctions.bsDateFormat("%M %d, %y", parseInt(num_date[0]), parseInt(num_date[1]), parseInt(num_date[2]));
            $(this).text(formattedNepaliDate);
            console.log(formattedNepaliDate)

        });

        {#  Bs month number to text #}
        $('.bsm-n-t').each(function () {
            let num_date = $.trim($(this).text());
            let formattedNepaliDate = calendarFunctions.bsDateFormat("%M", 2075, parseInt(num_date), 1);
            $(this).text(formattedNepaliDate);
        });

        {#  Nepali number date to strng  #}

        $('.n-m').each(function () {
            let num_date = $.trim($(this).text());
            $(this).text(format(num_date));
        })
    });

    let format = function (num) {
        let str = num.toString().replace("", ""), parts = false, output = [], i = 1, formatted = null;
        if (str.indexOf(".") > 0) {
            parts = str.split(".");
            str = parts[0];
        }
        str = str.split("").reverse();
        for (let j = 0, len = str.length; j < len; j++) {
            if (str[j] !== ",") {
                output.push(str[j]);
                if (i % 3 === 0 && j < (len - 1)) {
                    output.push(",");
                }
                i++;
            }
        }
        formatted = output.reverse().join("");
        return ("" + formatted + ((parts) ? "." + parts[1].substr(0, 2) : ""));
    };
</script>
<script>
    let makeFullScreen = function () {
    //$('.sidebar-toggle').trigger('click');
}
</script>
{% block scripts %}{% endblock %}

</body>
</html>
